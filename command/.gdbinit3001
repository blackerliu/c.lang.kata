##############################################################################
#  						   CONFIDENTIAL								
#        Hangzhou GuoXin Science and Technology Co., Ltd.             
#                   (C)2007-2008, All right reserved
##############################################################################
# File Name : .gdbinit
# Author    : LINJJ
# Project   : API
# Type      : GDB Debug Script
##############################################################################
# Purpose   : Invoking gdb will then start the simulator and load ELF into it. 
# 			  You should start gdb using a command like `ckcore-elf-gdb *.elf'.
#             This Script file is used for Ckcore.
##############################################################################
# Release History:
# VERSION      Date          AUTHOR         Description
#   0.1      2008.04.08    	  Linjj          Creation
# 
##############################################################################
# Notation:
# 		1,	以下参数的配置,不能选择/使能多项,只能为多选一,否则出错.

# 		2,	FPGA调试的时候,打开调试使能的环境变量.

# 		3,  GX3001(仅针对) :当sdram的工作在  108M的情况下sdram的相位 0x00000033.
# 		  			 		当sdram的工作在129.6M的情况下sdram的相位 0x00000030.
##############################################################################
#Connect to Jtag Server
tar jtag jtag://192.168.120.112:8888

#Set communication protocol
set download-write-size 4096


################################################
# FPGA 调试模式下 环境变量的使能.(默认情况下,为0)
################################################
set $FPGA_DEBUG_MODE 				= 	0


################################################
# SET CHIP TYPE CONFIG
################################################
set $CONFIG_GX6001_CHOISE 			= 	0

set $CONFIG_GX6102_CHOISE 			= 	0
set $CONFIG_GX6103_CHOISE 			= 	0
set $CONFIG_GX6107_CHOISE 			= 	0

set $CONFIG_GX3001_CHOISE 			= 	1
set $CONFIG_GX3002_CHOISE 			= 	0
################################################


################################################
# SET PLL CONFIG
################################################
# PLL MULTIPLE CONFIG
set $PLL_CLOCK_FREQ_648MHZ 			= 	1
set $PLL_CLOCK_FREQ_756MHZ 			= 	0

# XTAL CHOISE 
set $XTAL_CLOCK_FREQ_4MHZ 			=	1
set $XTAL_CLOCK_FREQ_8MHZ			=	0
set $XTAL_CLOCK_FREQ_13DOT5MHZ   	= 	0
set $XTAL_CLOCK_FREQ_16MHZ       	= 	0
set $XTAL_CLOCK_FREQ_27MHZ     		=  	0

# CPU CLOCK CHOISE
set	$CPU_CLOCK_FREQ_54MHZ			= 	0
set	$CPU_CLOCK_FREQ_81MHZ			= 	0
set	$CPU_CLOCK_FREQ_92DOT5MHZ		= 	0
set $CPU_CLOCK_FREQ_108MHZ			= 	0
set	$CPU_CLOCK_FREQ_129DOT6MHZ   	= 	0
set	$CPU_CLOCK_FREQ_216MHZ       	= 	1

# SDRAM/DDRAM CLOCK CHOISE
set	$RAM_CLOCK_FREQ_81MHZ 			= 	0
set	$RAM_CLOCK_FREQ_92DOT5MHZ		= 	0
set	$RAM_CLOCK_FREQ_108MHZ			= 	1
set	$RAM_CLOCK_FREQ_129DOT6MHZ 		= 	0
set	$RAM_CLOCK_FREQ_216MHZ     		= 	0

# DVBX CLOCK CHOISE
set	$DVBX_CLOCK_FREQ_81MHZ			= 	0
set	$DVBX_CLOCK_FREQ_92DOT5MHZ		= 	0
set	$DVBX_CLOCK_FREQ_108MHZ			= 	1
set	$DVBX_CLOCK_FREQ_129DOT6MHZ  	= 	0
set	$DVBX_CLOCK_FREQ_216MHZ      	= 	0

# VPU CLOCK CHOISE 
set	$VPU_CLOCK_FREQ_81MHZ 			= 	0
set	$VPU_CLOCK_FREQ_92DOT5MHZ		= 	0
set	$VPU_CLOCK_FREQ_108MHZ	 		=	1
set	$VPU_CLOCK_FREQ_129DOT6MHZ 		=   0
set	$VPU_CLOCK_FREQ_216MHZ       	= 	0
################################################

################################################
# SET RAM CONFIG (INCLUDE SIZE / PHRASE.)
################################################
# SDRAM / DDRAM TYPE CHOISE
set $CHOISE_CONFIG_SDRAM    		= 	1
set $CHOISE_CONFIG_DDRAM    		= 	0

# 外挂DRAM的块数. (默认情况下为0,只有一块).
set $DRAM_HAVE_TWO_CHIP 			= 	0

# SDRAM /DDRAM SIZE CONFIG 
# 外挂第一块DRAM 大小配置
set $DRAM_16M_BIT   				= 	0
set $DRAM_64M_BIT   				= 	0
set $DRAM_128M_BIT  				= 	0
set $DRAM_256M_BIT  				= 	1
set $DRAM_512M_BIT  				= 	0

# 外挂第二块DRAM 大小配置
set $DRAM_1_16M_BIT   				= 	0
set $DRAM_1_64M_BIT   				= 	1
set $DRAM_1_128M_BIT  				= 	0
set $DRAM_1_256M_BIT  				= 	0
set $DRAM_1_512M_BIT  				= 	0

# SDRAM / DDRAM PHRASE CONFIG
set $SDRAM_CLOCK_PHASE       		= 	0x00000033
set $DDRAM_CLOCK_PHASE       		= 	0x000fc327
################################################

################################################
# SET OTHER CONFIG  LIKE. I2S DTO,BLACK SCREEN
################################################
# SET I2S DTO1/PLL (主要用于开机爆音.)
set $I2S_DTO1_PLL_CONFIG 			= 	1

# SET BLACK SCREEN
set $TVOUT_BLACK_SCREEN_CONFIG 		= 	1 					

# SET GDB PARAMETER OR NOT
set $GDB_DEBUG_PARAMETER_ENABLE 	= 	0
################################################

################################################
# CONFIG THE PIN MUX,IF YOU WANT TO CONFIG THE
# PIN MUX,1ST,YOU SHUOLD SET CONFIG_PIN = 1,
# 2SD,MUST ACCORDING TO THE PCB CONFIG THE PIN .
################################################
# MUTILEX PIN ENABLE
set $CONFIG_MUTILEX_PIN_ENABLE 		=   0

# ACCORDING TO PIN CONFIG
# GX3001/GX6102管脚复用关系选择.
set $PIN0_CONFIG     				= 	0
set $PIN1_CONFIG     				= 	0
set $PIN2_CONFIG     				= 	0
set $PIN3_CONFIG     				= 	0
set $PIN4_CONFIG     				= 	1
set $PIN5_CONFIG     				= 	1
set $PIN6_CONFIG     				= 	0
set $PIN7_CONFIG     				= 	0
set $PIN8_CONFIG     				= 	0
set $PIN9_CONFIG     				= 	0
set $PIN10_CONFIG    				= 	0
set $PIN11_CONFIG    				= 	0
set $PIN12_CONFIG    				= 	0
set $PIN13_CONFIG    				= 	0
set $PIN14_CONFIG    				= 	0
set $PIN15_CONFIG    				= 	0
set $PIN16_CONFIG    				= 	0
set $PIN17_CONFIG    				= 	0
set $PIN18_CONFIG    				= 	0
set $PIN19_CONFIG    				= 	0
set $PIN20_CONFIG    				= 	0
set $PIN21_CONFIG    				= 	0
set $PIN22_CONFIG    				= 	0
set $PIN23_CONFIG    				= 	0
set $PIN24_CONFIG    				= 	0
set $PIN25_CONFIG    				= 	1
set $PIN26_CONFIG    				= 	1
set $PIN27_CONFIG    				= 	0
set $PIN28_CONFIG    				= 	0
set $PIN29_CONFIG    				= 	0
set $PIN30_CONFIG    				= 	0
set $PIN31_CONFIG    				= 	0


# GX3002/GX6103/GX6107 管脚复用关系选择.
# 是否使能SPI FLASH的管脚复用.
set $SPI_FLASH_MUTILEX_PIN_ENABLE 	= 	1

# 是否使能MODEM UART的管脚复用.
set $MODEM_UART_MUTILEX_PIN_ENABLE 	= 	0

# TODO ....

################################################

################################################
# SOURCE CONFIG FILE
################################################
#reset CPU
set $psr  = 0x80000000
set $cr18 = 0x00000000

source gdbconfig
################################################

#echo \n1. Display SDRAM/DDRAM test :
#x /w 0x30006010

#echo \n2. Display Flash test :
#x /w 0x200F001c

jtagstart
